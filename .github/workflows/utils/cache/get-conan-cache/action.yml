name: Get conan cache
description: Getting conan cache

runs:
  using: 'composite'
  steps:
    - name: Get conan path
      shell: bash
      run: |
        if [ "$RUNNER_OS" == "Windows" ]; then
          echo "conanPath=C:\\Users\\runneradmin\\.conan2\\p\\" >> $GITHUB_ENV
        else
          echo "conanPath=~/.conan2/p/" >> $GITHUB_ENV
        fi

    - name: Get conan keys prefix
      shell: bash
      run: |
        echo "conanKeysPrefix=${{ runner.os }}-conan-store-" >> $GITHUB_ENV

    - uses: actions/cache@v4
      name: Setup conan cache
      with:
        path: ${{ env.conanPath }}
        key: ${{ env.conanKeysPrefix }}${{ hashFiles('conanfile.txt') }}
        restore-keys: |
          ${{ env.conanKeysPrefix }}
